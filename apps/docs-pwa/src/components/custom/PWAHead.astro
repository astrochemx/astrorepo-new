---
import { pwaAssetsHead } from 'virtual:pwa-assets/head';
import { pwaInfo } from 'virtual:pwa-info';

import { usePwaAssetsGenerator, usePwaPrompt } from '../../../astro.config.ts';

export interface Props {
  autoUpdateScript?: boolean;
  pwaAssets?: boolean;
}

const { autoUpdateScript = !usePwaPrompt, pwaAssets = usePwaAssetsGenerator } = Astro.props;
---

{
  pwaAssets && pwaAssetsHead && pwaAssetsHead.themeColor && (
    <meta name="theme-color" content={pwaAssetsHead.themeColor.content} />
  )
}
{pwaAssets && pwaAssetsHead && pwaAssetsHead.links.map((link) => <link {...link} />)}
{pwaInfo && <Fragment set:html={pwaInfo.webManifest.linkTag} />}
{autoUpdateScript && <script src="../../pwa-astro.ts" />}
